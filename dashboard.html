<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Javix VPS – Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#00d4ff;
  --secondary:#0066ff;
  --dark:#0b0f1a;
  --card:#111827;
  --text:#ffffff;
  --muted:#9ca3af;
  --shadow:rgba(0,212,255,0.2);
}

*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins,sans-serif;}
body{background:var(--dark);color:var(--text);display:flex;min-height:100vh;}
a{text-decoration:none;color:inherit;}

/* Sidebar */
.sidebar{
  width:250px;
  background:var(--card);
  padding:30px 20px;
  display:flex;
  flex-direction:column;
  position:fixed;
  top:0; bottom:0;
}
.sidebar .logo{
  font-size:2rem;
  font-weight:700;
  color:var(--primary);
  text-align:center;
  margin-bottom:40px;
}
.sidebar a{
  padding:12px 16px;
  margin-bottom:10px;
  border-radius:10px;
  transition:.3s;
  cursor:pointer;
}
.sidebar a.active, .sidebar a:hover{
  background:var(--shadow);
  color:#000;
}

/* Main Content */
.main{
  margin-left:250px;
  padding:40px;
  width:100%;
}

/* Topbar */
.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:40px;
}
.topbar h2{font-size:2rem;}

/* Cards */
.cards{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:20px;
  margin-bottom:40px;
}
.card{
  background:var(--card);
  padding:20px;
  border-radius:16px;
  border:1px solid var(--shadow);
  text-align:center;
  transition:.3s;
}
.card h3{font-size:1.5rem;color:var(--primary);}
.card p{color:var(--muted);margin-top:10px;font-size:.9rem;}

/* Table */
.table{
  width:100%;
  border-collapse:collapse;
  background:var(--card);
  border-radius:12px;
  overflow:hidden;
}
.table th, .table td{
  padding:12px 15px;
  border-bottom:1px solid var(--shadow);
  text-align:left;
}
.table th{color:var(--primary);}
.table td button{
  padding:6px 12px;
  border:none;
  border-radius:8px;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#000;
  font-weight:600;
  cursor:pointer;
}
.table td button:hover{opacity:.9;}

/* Logout Button */
.logout-btn{
  margin-top:auto;
  padding:12px;
  border:none;
  border-radius:10px;
  font-weight:600;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#000;
  cursor:pointer;
  transition:.3s;
}
.logout-btn:hover{opacity:.9;}

/* Floating Add Server */
.floating-add{
  position:fixed;
  bottom:30px;
  right:30px;
  padding:14px 28px;
  border-radius:14px;
  font-weight:600;
  background:linear-gradient(90deg,var(--primary),var(--secondary));
  color:#000;
  box-shadow:0 8px 30px var(--shadow);
  cursor:pointer;
  z-index:2000;
  transition:.3s;
}
.floating-add:hover{transform:translateY(-3px);opacity:.9;}

/* Hide sections by default */
.section{display:none;}
.section.active{display:block;}

/* Inputs & Buttons */
input{padding:10px;border-radius:8px;border:1px solid var(--shadow);background:var(--card);color:#fff;width:100%;margin:8px 0;}
button{cursor:pointer;border:none;}

/* Responsive */
@media(max-width:768px){
  .sidebar{width:70px;padding:20px;}
  .main{margin-left:70px;padding:20px;}
  .cards{grid-template-columns:1fr;}
  .table th, .table td{font-size:.8rem;}
}
</style>
</head>
<body>

<!-- Sidebar -->
<div class="sidebar">
  <div class="logo">Javix</div>
  <a class="sidebar-link active" data-target="overview">Overview</a>
  <a class="sidebar-link" data-target="servers">My Servers</a>
  <a class="sidebar-link" data-target="billing">Billing</a>
  <a class="sidebar-link" data-target="support">Support</a>
  <a class="sidebar-link" data-target="account">Account</a>
  <button class="logout-btn" onclick="logout()">Logout</button>
</div>

<!-- Main Content -->
<div class="main">
  <div class="topbar">
    <h2 id="topbar-title">Welcome, Himanshu!</h2>
    <span>Dashboard</span>
  </div>

  <!-- Overview Section -->
  <div id="overview" class="section active">
    <div class="cards">
      <div class="card"><h3 id="active-servers">0</h3><p>Active VPS</p></div>
      <div class="card"><h3>99.9%</h3><p>Uptime SLA</p></div>
      <div class="card"><h3 id="pending-invoice">$0</h3><p>Pending Invoice</p></div>
      <div class="card"><h3 id="open-tickets">0</h3><p>Open Support Tickets</p></div>
    </div>
  </div>

  <!-- Servers Section -->
  <div id="servers" class="section">
    <h3>My VPS Servers</h3>
    <table class="table" id="servers-table">
      <thead>
        <tr>
          <th>Server</th>
          <th>Plan</th>
          <th>IP</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Billing Section -->
  <div id="billing" class="section">
    <h3>Billing</h3>
    <ul id="billing-list" style="color:var(--muted);"></ul>
  </div>

  <!-- Support Section -->
  <div id="support" class="section">
    <h3>Support</h3>
    <ul id="support-list" style="color:var(--muted);"></ul>
    <input type="text" id="ticket-msg" placeholder="New ticket message">
    <button onclick="createTicket()">Open Ticket</button>
  </div>

  <!-- Account Section -->
  <div id="account" class="section">
    <h3>Account Information</h3>
    <div class="card" style="padding:25px; max-width:500px; margin-bottom:50px;">
      <p><strong>Username:</strong> <span id="acc-username"></span></p>
      <p><strong>Email:</strong> <span id="acc-email"></span></p>
      <p>
        <strong>Current Password:</strong> 
        <span id="acc-password">••••••••</span>
        <button onclick="togglePassword()" style="margin-left:10px;padding:4px 8px;font-size:0.8rem;border:none;border-radius:6px;background:var(--primary);color:#000;cursor:pointer;">Show</button>
      </p>
      <hr style="margin:20px 0; border-color:var(--shadow);">
      <h4>Reset Password</h4>
      <input type="password" id="new-password" placeholder="New Password">
      <input type="password" id="confirm-password" placeholder="Confirm Password">
      <button onclick="resetPassword()" style="margin-top:10px;padding:12px 20px;background:linear-gradient(90deg,var(--primary),var(--secondary));color:#000;font-weight:600;">Save New Password</button>
      <p id="password-msg" style="margin-top:10px;color:var(--primary);font-weight:600;"></p>
    </div>
  </div>

</div>

<!-- Floating Add Server -->
<div class="floating-add" onclick="addServer()">+ Add Server</div>

<script>
// PROTECTION
if(localStorage.getItem("javix_logged_in")!=="true"){window.location.href="login.html";}

// Sidebar navigation
const links = document.querySelectorAll('.sidebar-link');
const sections = document.querySelectorAll('.section');
const topbarTitle = document.getElementById("topbar-title");
links.forEach(link=>{
  link.addEventListener('click', ()=>{
    links.forEach(l=>l.classList.remove('active'));
    link.classList.add('active');
    const target = link.dataset.target;
    sections.forEach(sec=>sec.classList.remove('active'));
    document.getElementById(target).classList.add('active');
    topbarTitle.textContent = "Welcome, Himanshu! ("+link.textContent+")";
  });
});

// Logout
function logout(){
  localStorage.removeItem("javix_logged_in");
  window.location.href="login.html";
}

// Account
let passwordVisible=false;
const username = localStorage.getItem("javix_username")||"Himanshu";
const email = localStorage.getItem("javix_email")||"himanshu@example.com";
let currentPassword = localStorage.getItem("javix_password")||"123456";
document.getElementById("acc-username").textContent=username;
document.getElementById("acc-email").textContent=email;

function togglePassword(){
  passwordVisible = !passwordVisible;
  document.getElementById("acc-password").textContent = passwordVisible ? currentPassword : "••••••••";
}

function resetPassword(){
  const newPass = document.getElementById("new-password").value;
  const confirmPass = document.getElementById("confirm-password").value;
  const msg = document.getElementById("password-msg");
  if(newPass===""||confirmPass===""){msg.textContent="Please fill both fields!"; msg.style.color="red"; return;}
  if(newPass!==confirmPass){msg.textContent="Passwords do not match!"; msg.style.color="red"; return;}
  currentPassword=newPass;
  localStorage.setItem("javix_password",newPass);
  msg.textContent="Password updated successfully!";
  msg.style.color="var(--primary)";
  document.getElementById("new-password").value="";
  document.getElementById("confirm-password").value="";
  document.getElementById("acc-password").textContent="••••••••";
  passwordVisible=false;
}

// VPS Servers Functionality
let servers = JSON.parse(localStorage.getItem("javix_servers"))||[];
function renderServers(){
  const tbody = document.querySelector("#servers-table tbody");
  tbody.innerHTML="";
  servers.forEach((srv,i)=>{
    const tr = document.createElement("tr");
    tr.innerHTML=`<td>${srv.name}</td><td>${srv.plan}</td><td>${srv.ip}</td><td>${srv.status}</td>
    <td>
      <button onclick="toggleServer(${i})">${srv.status==="Running"?"Stop":"Start"}</button>
      <button onclick="deleteServer(${i})">Delete</button>
    </td>`;
    tbody.appendChild(tr);
  });
  document.getElementById("active-servers").textContent=servers.filter(s=>s.status==="Running").length;
}
function addServer(){
  const name="Server "+(servers.length+1);
  const plan = prompt("Enter Plan (Basic/Pro/Enterprise)","Basic")||"Basic";
  const ip = "192.168.1."+((servers.length+1));
  servers.push({name,plan,ip,status:"Stopped"});
  localStorage.setItem("javix_servers",JSON.stringify(servers));
  renderServers();
}
function toggleServer(i){
  servers[i].status = servers[i].status==="Running"?"Stopped":"Running";
  localStorage.setItem("javix_servers",JSON.stringify(servers));
  renderServers();
}
function deleteServer(i){
  if(confirm("Delete this server?")){servers.splice(i,1);localStorage.setItem("javix_servers",JSON.stringify(servers));renderServers();}
}
renderServers();

// Support Tickets
let tickets = JSON.parse(localStorage.getItem("javix_tickets"))||[];
function renderTickets(){
  const ul=document.getElementById("support-list"); ul.innerHTML="";
  tickets.forEach(t=>{
    const li=document.createElement("li"); li.textContent=t; ul.appendChild(li);
  });
  document.getElementById("open-tickets").textContent=tickets.length;
}
function createTicket(){
  const msg=document.getElementById("ticket-msg").value;
  if(msg===""){alert("Enter ticket message"); return;}
  tickets.push(msg);
  localStorage.setItem("javix_tickets",JSON.stringify(tickets));
  document.getElementById("ticket-msg").value="";
  renderTickets();
}
renderTickets();

// Billing
let invoices = JSON.parse(localStorage.getItem("javix_invoices"))||[
  {id:1,amount:5,plan:"Basic"},
  {id:2,amount:10,plan:"Pro"}
];
function renderBilling(){
  const ul=document.getElementById("billing-list"); ul.innerHTML="";
  invoices.forEach(inv=>{
    const li=document.createElement("li"); li.textContent=`Invoice #${inv.id} – $${inv.amount} (${inv.plan})`;
    ul.appendChild(li);
  });
  const pending = invoices.reduce((a,b)=>a+b.amount,0);
  document.getElementById("pending-invoice").textContent=`$${pending}`;
}
renderBilling();
</script>

</body>
</html>
